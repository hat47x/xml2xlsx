# ADR 001: XML変換の基本設計原則

## ステータス
実装完了 2025-01-24
- EntityContextクラスで階層構造の自動判定を実装
- Entityクラスで属性要素の処理を実装
- 命名規則非依存の実装完了

## Context
XMLをExcel形式へ変換する際の基本設計原則を定義します。

## Decision

1. **設定の最小化**
   - 設定ファイルの項目は以下のみ:
     - primary_keys: エンティティのキー項目
     - sheet_name（省略可）: 出力シート名
     - column_order（省略可）: 出力列順序
   - 親子関係は全てXML構造から自動的に判定:
     - 親要素のprimary_keysから参照キーを生成
     - 階層構造から親子関係を特定
     - 追加の設定項目は不要

2. **属性要素の規約**
   - XMLの属性要素は`@`プレフィックスで明示的に表現
   - 例：`@id`, `@type`, `@code`
   - 設定ファイルでは一貫してこの規約を使用

3. **命名規則への非依存**
   - フィールド名やタグ名のパターンに依存する処理を禁止
   - データモデルの関係性はXML構造から自動判定

4. **階層構造の活用**
   - XMLの階層構造から全ての情報を取得
   - 親子関係も階層構造から自動的に解決
   - 追加の設定による補助を必要としない

## Consequences
- 設定項目を最小限に抑えることで、使用方法が明確に
- XMLの構造情報を最大限に活用し、冗長な設定を排除
- データモデルへの依存を無くし、より柔軟な構造に対応可能